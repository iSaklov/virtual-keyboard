(()=>{"use strict";const e={en:[[{code:"Backquote",key:"§",shiftKey:"±"},{code:"Digit1",key:"1",shiftKey:"!"},{code:"Digit2",key:"2",shiftKey:"@"},{code:"Digit3",key:"3",shiftKey:"#"},{code:"Digit4",key:"4",shiftKey:"$"},{code:"Digit5",key:"5",shiftKey:"%"},{code:"Digit6",key:"6",shiftKey:"^"},{code:"Digit7",key:"7",shiftKey:"&"},{code:"Digit8",key:"8",shiftKey:"*"},{code:"Digit9",key:"9",shiftKey:"("},{code:"Digit0",key:"0",shiftKey:")"},{code:"Minus",key:"-",shiftKey:"_"},{code:"Equal",key:"=",shiftKey:"+"},{code:"Backspace",key:"⌫",action:"Backspace"}],[{code:"Tab",key:"⇥",action:"Tab"},{code:"KeyQ",key:"q",shiftKey:"Q"},{code:"KeyW",key:"w",shiftKey:"W"},{code:"KeyE",key:"e",shiftKey:"E"},{code:"KeyR",key:"r",shiftKey:"R"},{code:"KeyT",key:"t",shiftKey:"T"},{code:"KeyY",key:"y",shiftKey:"Y"},{code:"KeyU",key:"u",shiftKey:"U"},{code:"KeyI",key:"i",shiftKey:"I"},{code:"KeyO",key:"o",shiftKey:"O"},{code:"KeyP",key:"p",shiftKey:"P"},{code:"BracketLeft",key:"[",shiftKey:"{"},{code:"BracketRight",key:"]",shiftKey:"}"},{code:"Enter",key:"↵",action:"Enter"}],[{code:"CapsLock",key:"⇪",action:"CapsLock"},{code:"KeyA",key:"a",shiftKey:"A"},{code:"KeyS",key:"s",shiftKey:"S"},{code:"KeyD",key:"d",shiftKey:"D"},{code:"KeyF",key:"f",shiftKey:"F"},{code:"KeyG",key:"g",shiftKey:"G"},{code:"KeyH",key:"h",shiftKey:"H"},{code:"KeyJ",key:"j",shiftKey:"J"},{code:"KeyK",key:"k",shiftKey:"K"},{code:"KeyL",key:"l",shiftKey:"L"},{code:"Semicolon",key:";",shiftKey:":"},{code:"Quote",key:"'",shiftKey:'"'},{code:"Backslash",key:"\\",shiftKey:"|"}],[{code:"ShiftLeft",key:"⇧",action:"Shift"},{code:"IntlBackslash",key:"`",shiftKey:"~"},{code:"KeyZ",key:"z",shiftKey:"Z"},{code:"KeyX",key:"x",shiftKey:"X"},{code:"KeyC",key:"c",shiftKey:"C"},{code:"KeyV",key:"v",shiftKey:"V"},{code:"KeyB",key:"b",shiftKey:"B"},{code:"KeyN",key:"n",shiftKey:"N"},{code:"KeyM",key:"m",shiftKey:"M"},{code:"Comma",key:",",shiftKey:"<"},{code:"Period",key:".",shiftKey:">"},{code:"Slash",key:"/",shiftKey:"?"},{code:"ShiftRight",key:"⇧",action:"Shift"}],[{code:"ControlLeft",key:"⌃",action:"Ctrl"},{code:"AltLeft",key:"⌥",action:"Alt"},{code:"MetaLeft",key:"⌘",action:"Meta"},{code:"Space",key:" ",shiftKey:" "},{code:"MetaRight",key:"⌘",action:"Meta"},{code:"AltRight",key:"⌥",action:"Alt"},{code:"ArrowLeft",key:"←",action:"ArrowLeft"},{code:"ArrowUp",key:"↑",action:"ArrowUp"},{code:"ArrowDown",key:"↓",action:"ArrowDown"},{code:"ArrowRight",key:"→",action:"ArrowRight"}]],ru:[[{code:"Backquote",key:">",shiftKey:"<"},{code:"Digit1",key:"1",shiftKey:"!"},{code:"Digit2",key:"2",shiftKey:'"'},{code:"Digit3",key:"3",shiftKey:"№"},{code:"Digit4",key:"4",shiftKey:"%"},{code:"Digit5",key:"5",shiftKey:":"},{code:"Digit6",key:"6",shiftKey:","},{code:"Digit7",key:"7",shiftKey:"."},{code:"Digit8",key:"8",shiftKey:";"},{code:"Digit9",key:"9",shiftKey:"("},{code:"Digit0",key:"0",shiftKey:")"},{code:"Minus",key:"-",shiftKey:"_"},{code:"Equal",key:"=",shiftKey:"+"},{code:"Backspace",key:"⌫",action:"Backspace"}],[{code:"Tab",key:"⇥",action:"Tab"},{code:"KeyQ",key:"й",shiftKey:"Й"},{code:"KeyW",key:"ц",shiftKey:"Ц"},{code:"KeyE",key:"у",shiftKey:"У"},{code:"KeyR",key:"к",shiftKey:"К"},{code:"KeyT",key:"е",shiftKey:"Е"},{code:"KeyY",key:"н",shiftKey:"Н"},{code:"KeyU",key:"г",shiftKey:"Г"},{code:"KeyI",key:"ш",shiftKey:"Ш"},{code:"KeyO",key:"щ",shiftKey:"Щ"},{code:"KeyP",key:"з",shiftKey:"З"},{code:"BracketLeft",key:"х",shiftKey:"Х"},{code:"BracketRight",key:"ъ",shiftKey:"Ъ"},{code:"Enter",key:"↵",action:"Enter"}],[{code:"CapsLock",key:"⇪",action:"CapsLock"},{code:"KeyA",key:"ф",shiftKey:"Ф"},{code:"KeyS",key:"ы",shiftKey:"Ы"},{code:"KeyD",key:"в",shiftKey:"В"},{code:"KeyF",key:"а",shiftKey:"А"},{code:"KeyG",key:"п",shiftKey:"П"},{code:"KeyH",key:"р",shiftKey:"Р"},{code:"KeyJ",key:"о",shiftKey:"О"},{code:"KeyK",key:"л",shiftKey:"Л"},{code:"KeyL",key:"д",shiftKey:"Д"},{code:"Semicolon",key:"ж",shiftKey:"Ж"},{code:"Quote",key:"э",shiftKey:"Э"},{code:"Backslash",key:"ё",shiftKey:"Ё"}],[{code:"ShiftLeft",key:"⇧",action:"Shift"},{code:"IntlBackslash",key:"]",shiftKey:"["},{code:"KeyZ",key:"я",shiftKey:"Я"},{code:"KeyX",key:"ч",shiftKey:"Ч"},{code:"KeyC",key:"с",shiftKey:"С"},{code:"KeyV",key:"м",shiftKey:"М"},{code:"KeyB",key:"и",shiftKey:"И"},{code:"KeyN",key:"т",shiftKey:"Т"},{code:"KeyM",key:"ь",shiftKey:"Ь"},{code:"Comma",key:"б",shiftKey:"Б"},{code:"Period",key:"ю",shiftKey:"Ю"},{code:"Slash",key:"/",shiftKey:"?"},{code:"ShiftRight",key:"⇧",action:"Shift"}],[{code:"ControlLeft",key:"⌃",action:"Ctrl"},{code:"AltLeft",key:"⌥",action:"Alt"},{code:"MetaLeft",key:"⌘",action:"Meta"},{code:"Space",key:" ",shiftKey:" "},{code:"MetaRight",key:"⌘",action:"Meta"},{code:"AltRight",key:"⌥",action:"Alt"},{code:"ArrowLeft",key:"←",action:"ArrowLeft"},{code:"ArrowUp",key:"↑",action:"ArrowUp"},{code:"ArrowDown",key:"↓",action:"ArrowDown"},{code:"ArrowRight",key:"→",action:"ArrowRight"}]]},t=document.createElement("div");t.classList.add("keyboard");const c=document.createElement("textarea");c.classList.add("textarea");const s=document.createElement("h1"),o=document.createElement("span");o.classList.add("keyboard-OS");const i=document.createElement("span");i.classList.add("keyboard-switching");let y=localStorage.getItem("language")||"en";function a(e){return t.querySelector(`button[data-code="${e}"]`)}function d(e){const s=c.selectionStart,o=c.selectionEnd,i=c.value,y=e;(t.classList.contains("capslock-pressed")||t.classList.contains("shift-pressed"))&&y.toUpperCase(),c.value=i.substring(0,s)+y+i.substring(o),c.setSelectionRange(s+y.length,s+y.length),c.focus()}function n(e){const t=c.selectionStart,s=c.selectionEnd;-1===e&&t>0?(c.value=c.value.slice(0,t-1)+c.value.slice(s),c.selectionStart=t-1,c.selectionEnd=t-1):1===e&&s<c.value.length&&(c.value=c.value.slice(0,t)+c.value.slice(s+1),c.selectionStart=t,c.selectionEnd=c.selectionStart),c.focus()}function k(){document.querySelectorAll('button[data-keytype="letter"]').forEach((e=>{t.classList.contains("capslock-pressed")?e.classList.add("uppercase"):e.classList.remove("uppercase")}))}function r(){document.querySelectorAll("button:not([data-action])").forEach((e=>{t.classList.contains("shift-pressed")?e.classList.add("uppercase"):e.classList.remove("uppercase")}))}function f(c){var s;s=y,document.querySelector("h1").innerText="en"===s?"RSS Virtual Keyboard":"RSS Виртуальная клавиатура",document.querySelector(".keyboard-OS").innerText="en"===s?"The keyboard was created in the operating system Mac OS":"Клавиатура создана в операционной системе Mac OS",document.querySelector(".keyboard-switching").innerText="en"===s?"To switch the language, use the combination : ctrl ⌃ + cmd ⌘ || delete key: ctrl ⌃ + ⌫":"Для переключения языка, используйте комбинацию : ctrl ⌃ + cmd ⌘ || клавиша delete : ctrl ⌃ + ⌫";const o=e[c].map((e=>{const t=document.createElement("div");return t.classList.add("keyboard-row"),e.forEach((e=>{const c=/^[a-zA-Zа-яА-ЯёЁ]$/.test(e.key),s=document.createElement("button");s.classList.add("keyboard-key"),e.action&&s.setAttribute("data-action",e.action),e.shiftKey&&s.setAttribute("data-shiftKey",e.shiftKey),c&&s.setAttribute("data-keyType","letter"),s.setAttribute("data-code",e.code),s.setAttribute("data-key",e.key),t.append(s)})),t}));t.append(...o)}document.body.append(s,c,t,o,i),window.onload=()=>f(y);const h=document.querySelectorAll('button[data-action="Shift"]');h.forEach((e=>{e.addEventListener("mousedown",(()=>{t.classList.add("shift-pressed"),r()}))})),h.forEach((e=>{e.addEventListener("mouseup",(()=>{t.classList.remove("shift-pressed"),r()}))})),t.addEventListener("click",(e=>{if(e.target.classList.contains("keyboard-key"))switch(e.target.dataset.action||(t.classList.contains("capslock-pressed")||t.classList.contains("shift-pressed")?d(e.target.dataset.shiftkey):d(e.target.dataset.key)),e.target.dataset.action){case"Backspace":n(-1);break;case"Delete":n(1);break;case"Tab":d("    ");break;case"Enter":d("\n");break;case"CapsLock":t.classList.toggle("capslock-pressed"),k();break;case"ArrowUp":d("↑");break;case"ArrowDown":d("↓");break;case"ArrowLeft":d("←");break;case"ArrowRight":d("→")}})),document.addEventListener("keydown",(c=>{if(c.preventDefault(),function(e){const t=a(e);t&&t.classList.add("active")}(c.code),1===c.key.length){const{code:s}=c;if(t.classList.contains("capslock-pressed")||t.classList.contains("shift-pressed")){const{shiftKey:t}=e[y].find((e=>e.some((e=>e.code===s)))).find((e=>e.code===s)).shiftKey;d(t)}else{const{key:t}=e[y].find((e=>e.some((e=>e.code===s)))).find((e=>e.code===s)).key;d(t)}}switch(c.key){case"Backspace":t.classList.contains("ctrl-pressed")?n(1):n(-1);break;case"Tab":d("    ");break;case"Enter":d("\n");break;case"CapsLock":t.classList.toggle("capslock-pressed",c.getModifierState("CapsLock")),k();break;case"Shift":t.classList.add("shift-pressed"),r();break;case"Control":t.classList.add("ctrl-pressed");break;case"Meta":t.classList.contains("ctrl-pressed")&&function(){t.innerHTML="";const e="en"===y?"ru":"en";localStorage.setItem("language",e),y=e,f(e)}();break;case"ArrowUp":d("↑");break;case"ArrowDown":d("↓");break;case"ArrowLeft":d("←");break;default:d("→")}})),document.addEventListener("keyup",(e=>{"CapsLock"===e.key&&(t.classList.toggle("capslock-pressed",e.getModifierState("CapsLock")),k()),"Shift"===e.key&&(t.classList.remove("shift-pressed"),r()),"Control"===e.key&&t.classList.remove("ctrl-pressed"),function(e){const t=a(e);t&&t.classList.remove("active")}(e.code)}))})();